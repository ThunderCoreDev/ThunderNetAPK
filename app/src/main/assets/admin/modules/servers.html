<div class="servers-module">
    <div class="module-header">
        <h2><i class="fas fa-server"></i> Estado de Servidores</h2>
        <div class="module-actions">
            <button class="btn btn-primary" onclick="refreshServers()">
                <i class="fas fa-sync-alt"></i> Actualizar
            </button>
        </div>
    </div>
    
    <div class="servers-grid" id="serversContainer">
        <!-- Los servidores se cargarán aquí -->
    </div>
    
    <div class="server-stats">
        <h3><i class="fas fa-chart-bar"></i> Estadísticas del Sistema</h3>
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-microchip"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-value" id="cpuUsage">0%</div>
                    <div class="stat-label">Uso de CPU</div>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-memory"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-value" id="memoryUsage">0%</div>
                    <div class="stat-label">Uso de Memoria</div>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-hdd"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-value" id="diskUsage">0%</div>
                    <div class="stat-label">Uso de Disco</div>
                </div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">
                    <i class="fas fa-network-wired"></i>
                </div>
                <div class="stat-info">
                    <div class="stat-value" id="networkUsage">0 KB/s</div>
                    <div class="stat-label">Tráfico de Red</div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.servers-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 20px;
    margin: 20px 0;
}

.server-card {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 20px;
    position: relative;
    overflow: hidden;
}

.server-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
}

.server-card.online::before {
    background: linear-gradient(90deg, var(--success), #4caf50);
}

.server-card.offline::before {
    background: linear-gradient(90deg, var(--danger), #f44336);
}

.server-card.warning::before {
    background: linear-gradient(90deg, var(--warning), #ff9800);
}

.server-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.server-name {
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 10px;
}

.server-status {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.9rem;
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.status-dot.online {
    background: var(--success);
    animation: pulse 2s infinite;
}

.status-dot.offline {
    background: var(--danger);
}

.status-dot.warning {
    background: var(--warning);
    animation: pulse 2s infinite;
}

.server-info {
    margin: 15px 0;
}

.info-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
    font-size: 0.9rem;
}

.info-label {
    color: var(--text-secondary);
}

.info-value {
    color: var(--text-primary);
    font-weight: 500;
}

.server-actions {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}

.server-stats {
    margin-top: 30px;
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 20px;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 15px;
}

.stat-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 5px;
}

.stat-icon {
    font-size: 2rem;
    color: var(--accent-blue);
}

.stat-info {
    flex: 1;
}

.stat-value {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--accent-blue);
}

.stat-label {
    color: var(--text-secondary);
    font-size: 0.9rem;
}
</style>

<script>
// Datos de ejemplo de servidores
const mockServers = [
    {
        id: 1,
        name: "Servidor Auth",
        type: "auth",
        status: "online",
        players: 0,
        uptime: "15d 8h 32m",
        cpu: "12%",
        memory: "256MB / 2GB",
        port: 3724
    },
    {
        id: 2,
        name: "Reino: Lordaeron",
        type: "world",
        status: "online",
        players: 128,
        uptime: "7d 14h 20m",
        cpu: "45%",
        memory: "1.2GB / 4GB",
        port: 8085
    },
    {
        id: 3,
        name: "Reino: Orgrimmar",
        type: "world",
        status: "warning",
        players: 64,
        uptime: "2d 3h 15m",
        cpu: "38%",
        memory: "896MB / 4GB",
        port: 8086
    },
    {
        id: 4,
        name: "Base de Datos Auth",
        type: "database",
        status: "online",
        players: 0,
        uptime: "30d 0h 0m",
        cpu: "8%",
        memory: "512MB / 8GB",
        port: 3306
    },
    {
        id: 5,
        name: "Servidor SOAP",
        type: "soap",
        status: "offline",
        players: 0,
        uptime: "0d 0h 0m",
        cpu: "0%",
        memory: "0MB / 512MB",
        port: 7878
    }
];

function refreshServers() {
    displayServers(mockServers);
    updateSystemStats();
}

function displayServers(servers) {
    const container = document.getElementById('serversContainer');
    if (!container) return;
    
    container.innerHTML = '';
    
    servers.forEach(server => {
        const card = document.createElement('div');
        card.className = `server-card ${server.status}`;
        
        // Determinar icono por tipo
        let icon = 'fa-server';
        if (server.type === 'auth') icon = 'fa-user-lock';
        if (server.type === 'world') icon = 'fa-globe';
        if (server.type === 'database') icon = 'fa-database';
        if (server.type === 'soap') icon = 'fa-network-wired';
        
        card.innerHTML = `
            <div class="server-header">
                <div class="server-name">
                    <i class="fas ${icon}"></i>
                    ${server.name}
                </div>
                <div class="server-status">
                    <span class="status-dot ${server.status}"></span>
                    <span>${server.status === 'online' ? 'Online' : server.status === 'warning' ? 'Advertencia' : 'Offline'}</span>
                </div>
            </div>
            
            <div class="server-info">
                <div class="info-row">
                    <span class="info-label">Tipo:</span>
                    <span class="info-value">${getServerTypeName(server.type)}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Jugadores:</span>
                    <span class="info-value">${server.players}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Uptime:</span>
                    <span class="info-value">${server.uptime}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">CPU:</span>
                    <span class="info-value">${server.cpu}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Memoria:</span>
                    <span class="info-value">${server.memory}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Puerto:</span>
                    <span class="info-value">${server.port}</span>
                </div>
            </div>
            
            <div class="server-actions">
                ${server.status === 'online' ? `
                    <button class="btn btn-secondary" onclick="restartServer(${server.id})">
                        <i class="fas fa-redo"></i> Reiniciar
                    </button>
                    <button class="btn btn-secondary" onclick="stopServer(${server.id})">
                        <i class="fas fa-stop"></i> Detener
                    </button>
                ` : `
                    <button class="btn btn-primary" onclick="startServer(${server.id})">
                        <i class="fas fa-play"></i> Iniciar
                    </button>
                `}
                <button class="btn btn-secondary" onclick="viewServerLogs(${server.id})">
                    <i class="fas fa-file-alt"></i> Logs
                </button>
            </div>
        `;
        
        container.appendChild(card);
    });
}

function getServerTypeName(type) {
    const types = {
        'auth': 'Autenticación',
        'world': 'Mundo',
        'database': 'Base de Datos',
        'soap': 'SOAP Service'
    };
    return types[type] || type;
}

function updateSystemStats() {
    // Simular estadísticas del sistema
    document.getElementById('cpuUsage').textContent = Math.floor(Math.random() * 50) + 10 + '%';
    document.getElementById('memoryUsage').textContent = Math.floor(Math.random() * 70) + 20 + '%';
    document.getElementById('diskUsage').textContent = Math.floor(Math.random() * 80) + 10 + '%';
    document.getElementById('networkUsage').textContent = Math.floor(Math.random() * 1000) + 100 + ' KB/s';
}

// Funciones de acción
function startServer(id) {
    alert(`Iniciando servidor ID: ${id}`);
    refreshServers();
}

function stopServer(id) {
    if (confirm('¿Estás seguro de detener este servidor?\nLos jugadores serán desconectados.')) {
        alert(`Deteniendo servidor ID: ${id}`);
        refreshServers();
    }
}

function restartServer(id) {
    if (confirm('¿Estás seguro de reiniciar este servidor?\nLos jugadores serán desconectados.')) {
        alert(`Reiniciando servidor ID: ${id}`);
        refreshServers();
    }
}

function viewServerLogs(id) {
    alert(`Mostrando logs del servidor ID: ${id}`);
}

// Inicializar
document.addEventListener('DOMContentLoaded', function() {
    refreshServers();
});
</script>